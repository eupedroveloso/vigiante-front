<div 
  class="w-full flex items-stretch text-foreground min-h-[44px] border-b border-border"
  [ngClass]="{
    'bg-[#1a1a1a]': variant() === 'dark',
    'bg-card': variant() === 'light'
  }"
>
  <!-- Home + Separator -->
  @if (showHome()) {
    <div class="flex items-center shrink-0">
      <button
        type="button"
        (click)="onHomeClick()"
        class="p-2.5 flex items-center justify-center hover:bg-white/10 transition-colors rounded-none"
        aria-label="InÃ­cio"
      >
        <img
          [src]="icon('house.svg')"
          alt=""
          class="w-5 h-5"
          [ngClass]="variant() === 'dark' ? 'invert opacity-95' : 'text-foreground'"
        />
      </button>
      <div class="w-px h-6 self-center shrink-0" [ngClass]="variant() === 'dark' ? 'bg-white/20' : 'bg-border'" aria-hidden="true"></div>
    </div>
  }

  <!-- Tabs -->
  <div class="flex items-stretch flex-1 min-w-0">
    @for (tab of tabs(); track tab.id) {
      <button
        type="button"
        (click)="onTabClick(tab)"
        [attr.aria-selected]="isActive(tab)"
        [attr.aria-label]="tab.label"
        role="tab"
        class="flex items-center gap-2 px-3 py-2 border-b-2 min-w-0 max-w-[200px] transition-colors shrink-0 border-transparent"
        [ngClass]="{
          'bg-muted/50 text-foreground': isActive(tab) && variant() === 'light',
          'bg-white text-[#212121]': isActive(tab) && variant() === 'dark',
          'bg-transparent text-muted-foreground hover:bg-muted/30 hover:text-foreground': !isActive(tab) && variant() === 'light',
          'bg-transparent text-muted-foreground hover:bg-white/10 hover:text-foreground': !isActive(tab) && variant() === 'dark'
        }"
      >
        <span
          class="w-6 h-6 flex items-center justify-center shrink-0"
          [ngClass]="isActive(tab) ? 'text-primary' : 'text-muted-foreground opacity-80'"
        >
          <svg class="w-4 h-4" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M14.3999 2.26751C14.3999 2.12751 14.3274 2.00001 14.2099 1.92751C14.0924 1.85501 13.9449 1.84751 13.8199 1.91001L10.4224 3.61751L6.06485 2.16501C5.77735 2.07001 5.46485 2.08501 5.18985 2.21001L1.83485 3.73251C1.69235 3.79752 1.59985 3.94001 1.59985 4.09751V13.7325C1.59985 13.8725 1.67235 14 1.78985 14.075C1.90735 14.15 2.05485 14.155 2.17985 14.0925L5.57735 12.3825L9.93485 13.835C10.2224 13.93 10.5349 13.915 10.8099 13.79L14.1649 12.2675C14.3074 12.2025 14.3999 12.06 14.3999 11.9025V2.26751ZM10.7999 4.32501L13.5999 2.91501V11.645L10.7999 12.915V4.32501ZM9.99985 4.32001V13.0125L5.99985 11.68V2.98751L9.99985 4.32001ZM5.19985 11.675L2.39985 13.085V4.35501L5.19985 3.08501V11.675Z" fill="currentColor"/>
          </svg>
        </span>
        <span class="truncate text-sm font-medium">{{ tab.label }}</span>
        @if (tab.closable !== false) {
          <button
            type="button"
            (click)="onClose($event, tab)"
            class="p-0.5 rounded shrink-0 flex items-center justify-center transition-colors"
            [class.hover:bg-black/10]="variant() === 'dark'"
            [class.hover:bg-muted]="variant() === 'light'"
            [attr.aria-label]="'Fechar ' + tab.label"
          >
            <img [src]="icon('xmark.svg')" alt="" class="w-3.5 h-3.5 opacity-80" [ngClass]="(variant() === 'dark' && !isActive(tab)) ? 'invert opacity-90' : ''" />
          </button>
        }
      </button>
    }
    @if (showAddButton()) {
      <button
        type="button"
        (click)="onAddClick()"
        class="flex items-center justify-center min-w-[40px] h-10 px-2 rounded-md border border-transparent shrink-0 transition-colors"
        [ngClass]="{
          'text-muted-foreground hover:bg-white/10 hover:text-foreground': variant() === 'dark',
          'text-muted-foreground hover:bg-muted/50 hover:text-foreground': variant() === 'light'
        }"
        aria-label="Adicionar aba"
      >
        <img [src]="icon('plus.svg')" alt="" class="w-5 h-5" [ngClass]="variant() === 'dark' ? 'invert opacity-90' : ''" />
      </button>
    }
  </div>
</div>
